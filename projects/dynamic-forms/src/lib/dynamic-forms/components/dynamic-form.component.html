<form (ngSubmit)="onSubmit()" [formGroup]="form">

  <ng-container *ngFor="let control of controls" [ngSwitch]="control.controlType">
    <ng-container *ngIf="form.get(control.name) as controlRef">

      <div class="form-group">
        <div class="input-group mb-2">

          <ng-container *ngSwitchCase="'input'">

            <div class="input-group-prepend">
              <div class="input-group-text">
                <ion-icon [src]="svgIconBasePath + control.icon + '.svg'">></ion-icon>
              </div>
            </div>

            <ng-container [ngSwitch]="control.inputType">

              <ng-container *ngSwitchCase="'text'">

                <input [type]="control.inputType" class="form-control"
                  [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
                  [formControlName]="control.name" [id]="control.name" [placeholder]="control.label" ngDefaultControl>

              </ng-container>

              <ng-container *ngSwitchCase="'email'">

                <input [type]="control.inputType" class="form-control" [formControlName]="control.name"
                  [id]="control.name"
                  [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
                  [placeholder]="control.label" ngDefaultControl>

              </ng-container>

              <ng-container *ngSwitchCase="'number'">

                <input [type]="control.inputType" class="form-control" [formControlName]="control.name"
                  [id]="control.name"
                  [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
                  [placeholder]="control.label" ngDefaultControl>

              </ng-container>

              <ng-container *ngSwitchCase="'date'">

                <div class="vertical-input-group customFormContent">

                  <div class="input-group">
                    <label class="form-control customLabel"
                      [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}">{{control.label}}</label>
                  </div>

                  <div class="input-group">
                    <input [type]="control.inputType" class="form-control dateControl" [formControlName]="control.name"
                      [id]="control.name"
                      [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
                      [placeholder]="control.label" [min]="control.options.min" [max]="control.options.max"
                      ngDefaultControl>
                  </div>

                </div>

              </ng-container>

              <ng-container *ngSwitchCase="'time'">

                <div class="vertical-input-group customFormContent">

                  <div class="input-group">
                    <label class="form-control customLabel"
                      [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}">{{control.label}}</label>
                  </div>

                  <div class="input-group">
                    <input [type]="control.inputType" class="form-control dateControl" [formControlName]="control.name"
                      [id]="control.name"
                      [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
                      [placeholder]="control.label" [min]="control.options.min" [max]="control.options.max"
                      ngDefaultControl>
                  </div>

                </div>

              </ng-container>

              <ng-container *ngSwitchCase="'datetime-local'">

                <div class="vertical-input-group customFormContent">

                  <div class="input-group">
                    <label class="form-control customLabel"
                      [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}">{{control.label}}</label>
                  </div>

                  <div class="input-group">
                    <input [type]="control.inputType" class="form-control dateControl" [formControlName]="control.name"
                      [id]="control.name"
                      [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
                      [placeholder]="control.label" [min]="control.options.min" [max]="control.options.max"
                      ngDefaultControl>
                  </div>

                </div>

              </ng-container>

            </ng-container>

          </ng-container>

          <ng-container *ngSwitchCase="'textarea'">
            <div class="input-group-prepend">
              <div class="input-group-text">
                <ion-icon [src]="svgIconBasePath + control.icon + '.svg'">></ion-icon>
              </div>
            </div>
            <textarea class="form-control" [formControlName]="control.name" [id]="control.name"
              [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
              [placeholder]="control.label" elasticize ngDefaultControl></textarea>
          </ng-container>

          <ng-container *ngSwitchCase="'address'">
            <address-form-control [formControlName]="control.name" [id]="control.name" style="width: 100%;"
              [iconSource]="'' + svgIconBasePath + control.icon + '.svg'" [control]="control"
              [isInvalid]="controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [isValid]="controlRef.valid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
              ngDefaultControl></address-form-control>
          </ng-container>

          <ng-container *ngSwitchCase="'photos'">
            <photos-form-control [formControlName]="control.name" [id]="control.name" style="width: 100%;"
              [control]="control" [iconSource]="'' + svgIconBasePath + control.icon + '.svg'"
              [isInvalid]="controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [isValid]="controlRef.valid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
              ngDefaultControl></photos-form-control>
          </ng-container>

          <ng-container *ngSwitchCase="'radiolist'">
            <radio-list-form-control [formControlName]="control.name" [id]="control.name" style="width: 100%;"
              [control]="control" [iconSource]="'' + svgIconBasePath + control.icon + '.svg'"
              [isInvalid]="controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [isValid]="controlRef.valid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
              ngDefaultControl></radio-list-form-control>
          </ng-container>

          <ng-container *ngSwitchCase="'checkboxlist'">
            <checkbox-list-form-control [formControlName]="control.name" [id]="control.name" style="width: 100%;"
              [control]="control" [iconSource]="'' + svgIconBasePath + control.icon + '.svg'"
              [isInvalid]="controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [isValid]="controlRef.valid && (controlRef.dirty || controlRef.touched || displayErrors)"
              [ngClass]="{'is-invalid' : controlRef.invalid && (controlRef.dirty || controlRef.touched || displayErrors), 'is-valid' : controlRef.valid}"
              ngDefaultControl></checkbox-list-form-control>
          </ng-container>

          <div class="invalid-feedback">
            <ng-container *ngFor="let validation of control.validations">
              <div class="error-message" *ngIf="controlRef.hasError(validation?.type)">
                {{ validation?.message }}
              </div>
            </ng-container>
          </div>

        </div>
      </div>

    </ng-container>
  </ng-container>

</form>